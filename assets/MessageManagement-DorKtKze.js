import{r as m,U as i,i as n,j as a,k as h,S as l,s as c}from"./index-BwT0TMFD.js";import{c as p}from"./index-CH3Yv1qd.js";import{A as f}from"./AdminLayout-D1Xz5-pQ.js";import{R as g}from"./RenderAttachment-Dxe-th4I.js";import{T as u}from"./Table-NHGv61Lc.js";import{a as w,B as N}from"./Menu-BUBWf6En.js";import{A as x}from"./Avatar-WPLaIzDg.js";import"./IconButton-BxMspY-x.js";import"./Modal-UznUDvWG.js";import"./Typography-CWg47201.js";import"./ExitToApp-BA4cAYHY.js";import"./Container-Do0A2COr.js";import"./TextField-DMNUr9-0.js";import"./isMuiElement-Dt3XaWHj.js";import"./Menu-BcV6mNcf.js";import"./Tooltip-hpQu7cGm.js";import"./Toolbar-C_WyDltV.js";import"./MenuItem-CgsoA8dW.js";import"./Button-Cgl0Su8K.js";import"./InputAdornment-AZlR2H5G.js";import"./CircularProgress-CTtpU_lX.js";const C=[{field:"id",headerName:"ID",headerClassName:"table-header",width:200},{field:"attachments",headerName:"Attachments",headerClassName:"table-header",width:200,renderCell:r=>{const{attachments:e}=r.row;return(e==null?void 0:e.length)>0?e.map(o=>{const t=o.url,d=h(t);return a.jsx(N,{children:a.jsx("a",{href:t,download:!0,target:"_blank",style:{color:"black"},children:g(d,t)})})}):"No Attachments"}},{field:"content",headerName:"Content",headerClassName:"table-header",width:400},{field:"sender",headerName:"Sent By",headerClassName:"table-header",width:200,renderCell:r=>a.jsxs(l,{direction:"row",spacing:"1rem",alignItems:"center",children:[a.jsx(x,{alt:r.row.sender.name,src:r.row.sender.avatar}),a.jsx("span",{children:r.row.sender.name})]})},{field:"chat",headerName:"Chat",headerClassName:"table-header",width:220},{field:"groupChat",headerName:"Group Chat",headerClassName:"table-header",width:100},{field:"createdAt",headerName:"Time",headerClassName:"table-header",width:250}],$=()=>{const{loading:r,data:e,error:o}=p(`${c}/api/v1/admin/messages`,"dashboard-messages");w([{isError:o,error:o}]);const[t,d]=m.useState([]);return m.useEffect(()=>{e&&d(e.messages.map(s=>({...s,id:s._id,sender:{name:s.sender.name,avatar:i(s.sender.avatar,50)},createdAt:n(s.createdAt).format("MMMM Do YYYY, h:mm:ss a")})))},[e]),a.jsx(f,{children:r?a.jsx(Skeleton,{height:"100vh"}):a.jsx(u,{heading:"All Messages",columns:C,rows:t,rowHeight:200})})};export{$ as default};
